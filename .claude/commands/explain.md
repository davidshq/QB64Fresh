Provide a clear, educational explanation of the selected code or specified file/function.

## Tasks

1. **High-level overview**: What does this code do? What problem does it solve?
2. **Walk through the logic**: Explain the flow step-by-step
3. **Highlight key concepts**:
   - Design patterns being used
   - Algorithms or data structures
   - Language-specific idioms
   - External dependencies and their role
4. **Explain the "why"**: Why was it done this way? What alternatives exist?
5. **Note connections**: How does this code interact with other parts of the system?

## Depth Levels

Adjust explanation depth based on the code complexity:

- **Simple code**: Brief explanation, focus on context and purpose
- **Complex code**: Detailed walkthrough with examples
- **Tricky/clever code**: Extra attention to non-obvious behavior

## Guidelines

- Use analogies when helpful
- Point out potential gotchas or common mistakes
- If the code has issues, mention them but keep focus on explanation
- Reference line numbers for specific points
- Assume the reader is a competent developer but unfamiliar with this specific code

## Output Format

Structure the explanation with clear sections:
1. **Purpose**: One-paragraph summary
2. **How it works**: Detailed walkthrough
3. **Key details**: Important things to know
4. **Context**: How it fits in the broader system (if relevant)
